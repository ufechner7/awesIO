$schema: http://json-schema.org/draft-07/schema#
$id: wind_resource_schema
title: Wind Resource Data Schema
description: >
  Schema for wind resource data with clustering information.

type: object
required:
  - metadata
  - altitudes
  - clusters
  - probability_matrix

properties:
  metadata:
    type: object
    required:
      - name
      - description
      - note
      - awesIO_version
      - schema
      - n_clusters
      - reference_height_m
      - data_source
      - time_created
    properties:
      name:
        type: string
      description:
        type: string
      note:
        type: string
      awesIO_version:
        type: string
      schema:
        type: string
        const: wind_resource_schema.yml
      n_clusters:
        type: integer
        minimum: 1
      n_wind_speed_bins:
        type: integer
        minimum: 1
      n_wind_direction_bins:
        type: integer
        minimum: 1
      wind_direction_bin_width_deg:
        type: number
        minimum: 0
      reference_height_m:
        type: number
        minimum: 0
      total_samples:
        type: integer
        minimum: 1
      wind_speed_range_m_s:
        type: array
        minItems: 2
        maxItems: 2
      data_source:
        type: string
      location:
        type: object
        properties:
          latitude:
            type: number
          longitude:
            type: number
        additionalProperties: false
      time_range:
        type: object
        properties:
          start_year:
            type: integer
          end_year:
            type: integer
          years_included:
            type: array
          months_included:
            type: [string, array]
        additionalProperties: false
      altitude_range_m:
        type: array
        minItems: 2
        maxItems: 2
      time_created:
        type: string
    additionalProperties: false

  altitudes:
    type: array
    items:
      type: number

  wind_speed_bins:
    type: object
    properties:
      bin_edges_m_s:
        type: array
        items:
          type: number
      bin_centers_m_s:
        type: array
        items:
          type: number
    additionalProperties: false

  wind_direction_bins:
    type: object
    properties:
      bin_edges_deg:
        type: array
        items:
          type: number
      bin_centers_deg:
        type: array
        items:
          type: number
    additionalProperties: false

  clusters:
    type: array
    items:
      type: object
      required:
        - id
        - u_normalized
        - v_normalized
      properties:
        id:
          type: integer
          minimum: 1
        n_samples:
          type: integer
          minimum: 0
        frequency:
          type: number
          minimum: 0
          maximum: 1
        u_ref_mean_m_s:
          type: number
          minimum: 0
        u_ref_std_m_s:
          type: number
          minimum: 0
        v_ref_mean_m_s:
          type: number
        v_ref_std_m_s:
          type: number
          minimum: 0
        u_normalized:
          type: array
          items:
            type: number
        v_normalized:
          type: array
          items:
            type: number
        wind_speed_distribution:
          type: array
          items:
            type: number
        wind_direction_distribution:
          type: array
          items:
            type: number
      additionalProperties: false

  probability_matrix:
    type: object
    required:
      - data
    properties:
      description:
        type: string
      dimensions:
        type: string
      data:
        type: array
        items:
          type: array
          items:
            type: array
            items:
              type: number
    additionalProperties: false

additionalProperties: false
